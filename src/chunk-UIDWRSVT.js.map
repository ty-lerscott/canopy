{"version":3,"sources":["../package.json","api/download/resume/get.ts"],"sourcesContent":["{\n\t\"name\": \"canopy\",\n\t\"version\": \"1.0.0\",\n\t\"private\": true,\n\t\"scripts\": {\n\t\t\"dev:tools\": \"tsx watch src/tools/index.ts\",\n\t\t\"dev:apps\": \"next dev ./src/apps\",\n\t\t\"dev\": \"npm run keygen && NODE_OPTIONS=\\\"--import ./sentry.mjs\\\" tsx watch src/api/server.ts\",\n\t\t\"build:apps\": \"next build ./src/apps\",\n\t\t\"build:ts\": \"tsup\",\n\t\t\"build\": \"npm run keygen && npm run build:apps && npm run build:ts\",\n\t\t\"start:apps\": \"next start ./src/apps\",\n\t\t\"start\": \"node ./src/api/server.js\",\n\t\t\"lint\": \"biome lint ./src\",\n\t\t\"format\": \"biome format ./src --write\",\n\t\t\"check\": \"biome check ./src\",\n\t\t\"keygen\": \"tsx src/tools/set-env.ts\",\n\t\t\"tar\": \"tar --exclude-vcs --exclude=\\\"src/apps/.next\\\" -czvf canopy.tar.gz .\",\n\t\t\"zip\": \"zip -r canopy.zip . -x \\\"*.git*\\\" -x \\\"*.next*\\\"\",\n\t\t\"clean\": \"find ./src -type f \\\\( -name \\\"*.js\\\" -o -name \\\"*.js.map\\\" \\\\) -delete\",\n\t\t\"discord\": \"node ./src/tools/bots/discord.js\"\n\t},\n\t\"type\": \"module\",\n\t\"author\": {\n\t\t\"note\": \"LET THIS COME FROM THE API REQUEST OR CONTENTFUL\",\n\t\t\"name\": \"Tyler Scott\"\n\t},\n\t\"dependencies\": {\n\t\t\"@paralleldrive/cuid2\": \"2.2.2\",\n\t\t\"@sentry/node\": \"8.17.0\",\n\t\t\"@sentry/profiling-node\": \"8.17.0\",\n\t\t\"@types/body-parser\": \"1.19.5\",\n\t\t\"@types/cors\": \"2.8.17\",\n\t\t\"@types/express\": \"4.17.21\",\n\t\t\"@types/object.omit\": \"3.0.3\",\n\t\t\"@types/react\": \"18.3.3\",\n\t\t\"@types/react-dom\": \"18.3.0\",\n\t\t\"body-parser\": \"1.20.2\",\n\t\t\"clsx\": \"2.1.1\",\n\t\t\"commander\": \"12.1.0\",\n\t\t\"cors\": \"2.8.5\",\n\t\t\"deepmerge\": \"4.3.1\",\n\t\t\"discord-webhook-node\": \"1.1.8\",\n\t\t\"dotenv\": \"16.4.5\",\n\t\t\"express\": \"4.19.2\",\n\t\t\"jimp\": \"0.22.12\",\n\t\t\"next\": \"14.2.4\",\n\t\t\"object.omit\": \"3.0.0\",\n\t\t\"postcss\": \"8.4.39\",\n\t\t\"puppeteer\": \"22.12.1\",\n\t\t\"react\": \"18.3.1\",\n\t\t\"react-dom\": \"18.3.1\",\n\t\t\"redoc\": \"2.1.5\",\n\t\t\"tailwindcss\": \"3.4.4\",\n\t\t\"tsup\": \"8.1.0\",\n\t\t\"tsx\": \"4.16.2\",\n\t\t\"winston\": \"3.13.0\"\n\t},\n\t\"devDependencies\": {\n\t\t\"@biomejs/biome\": \"1.8.3\",\n\t\t\"@types/node\": \"20\",\n\t\t\"typescript\": \"5.5.3\"\n\t}\n}\n","import { logger } from \"@/api/logger\";\nimport puppeteer from \"@/api/utils/puppeteer\";\nimport env from \"@/tools/dotenv-config.mjs\";\nimport type { GetResponse } from \"@/types\";\nimport pkg from \"~/package.json\";\n\nconst isLocal = env.APP_ENV === \"development\";\n\nconst getResume = async (): Promise<GetResponse> => {\n\tlet responseBody: GetResponse;\n\n\ttry {\n\t\tconst pathname = isLocal\n\t\t\t? \"http://ty.lerscott.local:3000\"\n\t\t\t: \"https://ty.lerscott.com\";\n\t\tconst url = `${pathname}/resume/simple`;\n\n\t\tconst { browser, page } = await puppeteer();\n\n\t\tawait page.goto(url);\n\t\tconst pdfBuffer = await page.pdf({\n\t\t\tformat: \"A4\",\n\t\t\tmargin: {\n\t\t\t\ttop: \"1cm\",\n\t\t\t\tleft: \"1cm\",\n\t\t\t\tright: \"1cm\",\n\t\t\t\tbottom: \"1cm\",\n\t\t\t},\n\t\t});\n\t\tawait browser.close();\n\n\t\tconst fileName = pkg.author.name.toLowerCase().replace(/\\s/g, \"_\");\n\t\tconst headers = {\n\t\t\t\"Content-Type\": \"application/pdf\",\n\t\t\t\"Content-Disposition\": `attachment; filename=${fileName}_resume.pdf`,\n\t\t};\n\n\t\tresponseBody = { data: pdfBuffer, headers, status: 200 };\n\t} catch (error) {\n\t\tlogger.error(\"Error generating PDF:\", error);\n\n\t\tresponseBody = { status: 500, error: (error as Error).message };\n\t}\n\n\treturn responseBody;\n};\n\nexport default getResume;\n"],"mappings":"wHAAA,IAAAA,EAAA,CACC,KAAQ,SACR,QAAW,QACX,QAAW,GACX,QAAW,CACV,YAAa,+BACb,WAAY,sBACZ,IAAO,qFACP,aAAc,wBACd,WAAY,OACZ,MAAS,2DACT,aAAc,wBACd,MAAS,2BACT,KAAQ,mBACR,OAAU,6BACV,MAAS,oBACT,OAAU,2BACV,IAAO,qEACP,IAAO,+CACP,MAAS,sEACT,QAAW,kCACZ,EACA,KAAQ,SACR,OAAU,CACT,KAAQ,mDACR,KAAQ,aACT,EACA,aAAgB,CACf,uBAAwB,QACxB,eAAgB,SAChB,yBAA0B,SAC1B,qBAAsB,SACtB,cAAe,SACf,iBAAkB,UAClB,qBAAsB,QACtB,eAAgB,SAChB,mBAAoB,SACpB,cAAe,SACf,KAAQ,QACR,UAAa,SACb,KAAQ,QACR,UAAa,QACb,uBAAwB,QACxB,OAAU,SACV,QAAW,SACX,KAAQ,UACR,KAAQ,SACR,cAAe,QACf,QAAW,SACX,UAAa,UACb,MAAS,SACT,YAAa,SACb,MAAS,QACT,YAAe,QACf,KAAQ,QACR,IAAO,SACP,QAAW,QACZ,EACA,gBAAmB,CAClB,iBAAkB,QAClB,cAAe,KACf,WAAc,OACf,CACD,ECzDA,IAAMC,EAAUC,EAAI,UAAY,cAE1BC,EAAY,SAAkC,CACnD,IAAIC,EAEJ,GAAI,CAIH,IAAMC,EAAM,GAHKJ,EACd,gCACA,yBACoB,iBAEjB,CAAE,QAAAK,EAAS,KAAAC,CAAK,EAAI,MAAMC,EAAU,EAE1C,MAAMD,EAAK,KAAKF,CAAG,EACnB,IAAMI,EAAY,MAAMF,EAAK,IAAI,CAChC,OAAQ,KACR,OAAQ,CACP,IAAK,MACL,KAAM,MACN,MAAO,MACP,OAAQ,KACT,CACD,CAAC,EACD,MAAMD,EAAQ,MAAM,EAGpB,IAAMI,EAAU,CACf,eAAgB,kBAChB,sBAAuB,wBAHPC,EAAI,OAAO,KAAK,YAAY,EAAE,QAAQ,MAAO,GAAG,CAGT,aACxD,EAEAP,EAAe,CAAE,KAAMK,EAAW,QAAAC,EAAS,OAAQ,GAAI,CACxD,OAASE,EAAO,CACfC,EAAO,MAAM,wBAAyBD,CAAK,EAE3CR,EAAe,CAAE,OAAQ,IAAK,MAAQQ,EAAgB,OAAQ,CAC/D,CAEA,OAAOR,CACR,EAEOU,EAAQX","names":["package_default","isLocal","dotenv_config_default","getResume","responseBody","url","browser","page","puppeteer_default","pdfBuffer","headers","package_default","error","logger","get_default"]}