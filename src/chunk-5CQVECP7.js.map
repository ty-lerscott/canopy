{"version":3,"sources":["api/html/controller.ts"],"sourcesContent":["import type { Controller } from \"@/types\";\n\nimport getImage from \"@/api/image/utils/get-image\";\nimport ogImageTemplate from \"./templates/og-image\";\n\nconst HTMLController = async ({ query, res, next, pathname }: Controller) => {\n\tconst [subject] = pathname;\n\n\tres.set({\n\t\t\"Content-Type\": \"text/html\",\n\t});\n\n\tswitch (subject) {\n\t\tcase \"og\": {\n\t\t\tconst { data, status, error } = await getImage(query?.url as string);\n\n\t\t\tconst html = ogImageTemplate({\n\t\t\t\ttitle: query?.title as string,\n\t\t\t\timage: data?.toString(\"base64\"),\n\t\t\t\tsubtitle: query.subtitle as string,\n\t\t\t});\n\n\t\t\tres.set({\n\t\t\t\t\"Content-Length\": html.length,\n\t\t\t});\n\n\t\t\tres.send(error || html);\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tbreak;\n\t\t}\n\t}\n\tnext();\n};\n\nexport default HTMLController;\n"],"mappings":"2EAKA,IAAMA,EAAiB,MAAO,CAAE,MAAAC,EAAO,IAAAC,EAAK,KAAAC,EAAM,SAAAC,CAAS,IAAkB,CAC5E,GAAM,CAACC,CAAO,EAAID,EAMlB,OAJAF,EAAI,IAAI,CACP,eAAgB,WACjB,CAAC,EAEOG,EAAS,CAChB,IAAK,KAAM,CACV,GAAM,CAAE,KAAAC,EAAM,OAAAC,EAAQ,MAAAC,CAAM,EAAI,MAAMC,EAASR,GAAO,GAAa,EAE7DS,EAAOC,EAAgB,CAC5B,MAAOV,GAAO,MACd,MAAOK,GAAM,SAAS,QAAQ,EAC9B,SAAUL,EAAM,QACjB,CAAC,EAEDC,EAAI,IAAI,CACP,iBAAkBQ,EAAK,MACxB,CAAC,EAEDR,EAAI,KAAKM,GAASE,CAAI,EACtB,KACD,CACA,QACC,KAEF,CACAP,EAAK,CACN,EAEOS,EAAQZ","names":["HTMLController","query","res","next","pathname","subject","data","status","error","get_image_default","html","og_image_default","controller_default"]}