{"version":3,"sources":["api/image/controller.ts"],"sourcesContent":["import { logger } from \"@/api/logger\";\nimport type { Controller } from \"@/types\";\n\nimport blurImage from \"./utils/blur\";\nimport getOGImage from \"./utils/og\";\n\nconst ImageController = async ({ query, res, next, pathname }: Controller) => {\n\tconst [subject] = pathname;\n\n\tswitch (subject) {\n\t\tcase \"blur\": {\n\t\t\tconst { data, error, status, headers } = await blurImage(\n\t\t\t\tquery?.url as string,\n\t\t\t);\n\n\t\t\tres.set(headers);\n\t\t\tres.status(status).send(data || error);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"og\": {\n\t\t\tconst { data, error, status, headers } = await getOGImage({\n\t\t\t\turl: query?.url as string,\n\t\t\t\ttitle: query?.title as string,\n\t\t\t\tsubtitle: query?.subtitle as string,\n\t\t\t});\n\n\t\t\tres.set(headers);\n\t\t\tres.status(status).send(data || error);\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tres.send(`Image: ${subject || \"\"}`);\n\t\t\tbreak;\n\t\t}\n\t}\n\tnext();\n};\n\nexport default ImageController;\n"],"mappings":"gFAMA,IAAMA,EAAkB,MAAO,CAAE,MAAAC,EAAO,IAAAC,EAAK,KAAAC,EAAM,SAAAC,CAAS,IAAkB,CAC7E,GAAM,CAACC,CAAO,EAAID,EAElB,OAAQC,EAAS,CAChB,IAAK,OAAQ,CACZ,GAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,OAAAC,EAAQ,QAAAC,CAAQ,EAAI,MAAMC,EAC9CT,GAAO,GACR,EAEAC,EAAI,IAAIO,CAAO,EACfP,EAAI,OAAOM,CAAM,EAAE,KAAKF,GAAQC,CAAK,EACrC,KACD,CACA,IAAK,KAAM,CACV,GAAM,CAAE,KAAAD,EAAM,MAAAC,EAAO,OAAAC,EAAQ,QAAAC,CAAQ,EAAI,MAAME,EAAW,CACzD,IAAKV,GAAO,IACZ,MAAOA,GAAO,MACd,SAAUA,GAAO,QAClB,CAAC,EAEDC,EAAI,IAAIO,CAAO,EACfP,EAAI,OAAOM,CAAM,EAAE,KAAKF,GAAQC,CAAK,EACrC,KACD,CACA,QAAS,CACRL,EAAI,KAAK,UAAUG,GAAW,EAAE,EAAE,EAClC,KACD,CACD,CACAF,EAAK,CACN,EAEOS,EAAQZ","names":["ImageController","query","res","next","pathname","subject","data","error","status","headers","blur_default","og_default","controller_default"]}